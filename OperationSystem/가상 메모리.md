가상 메모리 : 물리 메모리의 크기와 상관없이 프로세스에 커다란 메모리 공간을 제공

가상 주소 : 가상 메모리 내에서 존재하는 0번지부터 시작하는 연속된 가상의 주소 공간

물리 메모리 내용 일부를 보조 기억 장치의 일부인 스왑 영역으로 옮긴다. 스왑은 메모리 관리자가 관리하고 가상 메모리의 구성 요소 중 하나이다. 부족한 공간을 스왑 영역을 통해 보충한다. 메모리가 꽉차면 프로세스를 스왑 영역으로 보내고 swap out을 하고, 작업을 마치면 swap in을 한다.

동적 주소 변환 : 물리 메모리와 스왑 영역을 합쳐서 프로세스가 사용하는 가상 주소를 실제 메모리 주소로 변환하는 방법

가상 메모리 시스템은 세그멘테이션 기법과 페이징 기법을 혼용해서 사용한다. 메모리 관리 시 매핑 테이블을 작성한다.

    페이징 기법 : 고정 분할 방식으로 가상 메모리를 분할한 각 영역을 페이지라고 한다. 구분을 위해서 물리 메모리의 각 영역을 프레임이라고 한다. 페이지와 프레임의 크기는 같고 덕분에 페이지는 어떤 프레임과도 연결될 수 있다.
    
    페이지 테이블을 만들어 매핑 정보를 저장한다. 페이지 테이블의 한 줄을 엔트리라고 부른다. 각 엔트리의 번호는 페이지의 번호와 일치하고 프레임 번호가 저장되어 있다. 물리 메모리의 운영체제 영역 일부에 놓인다. 각 프로세스는 페이지 테이블을 하나씩 갖는다.

        1. 가상 주소가 어느 페이지에 있는지 찾아낸다.
        
        2. 페이지 테이블에서 해당 페이지로 가서 어느 프레임이 위치한지 찾아낸다.

        3. 해당 프레임에서 페이지의 위치에 해당하는 실제 위치를 찾아낸다.

    VA = <P, D> -> PA = <F, D> => VA는 가상주소, PA는 물리 주소, F는 프레임, P는 페이지, D는 변위를 나타낸다.

    페이지 테이블의 전체 크기는 프로세스의 수에 비례하여 커진다. 페이지 테이블 수가 늘어나거나 페이지 테이블 크기가 커지면 물리 메모리의 운영체제 영역이 그만큼 늘어나서 사용자 영역이 줄어들게 된다. 물리 메모리 크기가 작다면 프로세스뿐만 아니라 페이지 테이블도 스왑 영역으로 옮겨지게 된다. 페이지 테이블에 빠른 접근을 위해 Page Table Base Register가 존재한다.

    페이지 매핑 방식은 전체를 메모리에서 관리하는지, 일부를 스왑 영역에서 관리하느냐에 따라 달라진다.

        직접 매핑 : 테이블 전체가 물리 메모리 운영체제 영역에 존재. 즉시 주소 변환 가능

        연관 매핑 : 테이블 전체를 스왑 영역에서 관리. 메모리 여유 공간이 적을 때 사용함. 일부만 무작위(translation look-aside buffer)로 물리 메모리에서 가지고 있음. 물리 메모리 내의 페이지 테이블을 다 검색해야 한다. 없다면 스왑 영역에서의 테이블을 검색.

        집합-연관 매핑 : 연관 매핑 문제 개선. 테이블 관리 방식은 연관 매핑과 같지만, 페이지 테이블을 일정 크기로 잘라서 집합으로 묶는다. 집합은 디렉터리 테이블을 새로 만들어서 관리한다. 디렉터리 테이블은 집합(자른 테이블)이 물리 메모리에 있다면 물리 메모리 주소를, 스왑 영역에 있다면 I로 표시한다. 이를 통해 간단하게 찾고자 하는 페이지가 물리 메모리에 있는지 없는지 빠르게 파악할 수 있다. VA = <P1, P2, D>로 표시하여 두 단계를 거쳐서 물리 주소로 변환한다. 즉, 처음에는 디렉터리 테이블에서 P1을 찾아서 이동하고 P1에 부분 테이블이 물리 메모리에 있다면 해당 시작 주소를 통해 부분 테이블의 P2로 이동하고, 물리 메모리 주소로 이동하여 값을 찾아낸다. 크기가 큰 페이지 테이블을 집합으로 나눠서 디렉터리 테이블로 관리하기 때문에 효율적이다.

        역매핑 : 프레임 번호를 기준으로 테이블을 구성. 해당 프레임에 어떤 프로세스가 올라와있는지(PID)를 표시함. 프로세스 수와 상관없이 테이블이 하나만 존재함. 테이블 크기가 작다. 그러나 프로세스가 PID와 페이지 번호를 모두 검색해야 한다.

    세그멘테이션 기법 : 가변 분할 방식으로 세그멘테이션 매핑 테이블을 통해 세그먼트를 관리한다. 테이블에는 세그먼트 크기인 limit와 물리 메모리 시작 주소인 address가 있다. 스왑 영역을 사용하며 테이블이 작고 단순하지만 메모리 관리가 복잡하다. 
    VA = <S, D>로 가상 주소를 표현하며, S는 세그먼트 번호, D는 변위를 나타낸다. 세그먼트의 시작 주소에 변위를 더해서 물리 주소를 찾아낸다. 즉, PA = S의 시작 주소 + D 이다. 
    limit보다 더 큰 주소에 접근하면 프로세스를 강제로 종료하는데 이를 trap이라고 한다.