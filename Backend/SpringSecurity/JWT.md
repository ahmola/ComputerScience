MFA(Multi-Factor Authentication) : 다단계 인증이라는 의미로, 처음에 인증에 성공한 사용자의 정보에 맞춰 임의의 OTP(One-Time Password)를

발급하여 두 번째 인증부터는 OTP를 헤더에 추가하여 인증하게 된다.

이러한 인증을 사용하는 이유는 기본적으로 웹은 stateless상태로 클라이언트의 상태를 저장하지 않기 때문이다.

이를 토큰이라고 한다.

토큰은 일종의 액세스 카드로 웹에서 인증 프로세스의 결과로 사용자가 엔드포인트에 접근할 수 있도록 반환한다.

인증이 완료되었음을 증명하는 방법으로 토큰에는 수명이 있어 일정 시간이 지나면 다시 인증을 요구한다.

토큰을 사용하면 번거롭게 매번 인증 프로세스를 거치지 않아도되고, 토큰에 세부 정보를 담아 알맞은 서비스를 제공할 수 있다.

또한 인증 책임을 서버가 구현하지 않고 다른 시스템을 통해서 발급받을 수도 있다.

대표적으로 JWT를 사용한다.

데이터 형식을 JSON형태로 하여 웹에서 사용되는 토큰이라는 뜻이다.

세 부분으로 나뉘며 마침표로 구분된다.

맨 앞부터 순서대로 헤더, 본문, 디지털 서명을 구성된다.

헤더에는 토큰과 관련된 메타데이터를 저장하고, 본문에는 권한 부여에 필요한 각종 세부 정보가 들어간다. 최대한 본문은 짧게 하는 것이 효율이 좋다.

마지막 부분인 디지털 서명은 헤더와 본문을 바탕으로 생성된 해시코드로 생략가능하나 나중에 이를 사용해서 내용 변경 여부를 확인할 수 있다.

JWT는 간단하게 다음 과정으로 요약할 수 있다.

    1. 사용자가 인증을 위해 자격 증명(사용자 이름 및 비밀번호)를 보낸다. 인증 서버가 사용자를 인증하고 토큰을 발급한다.

    2. 사용자가 발급받은 토큰으로 서버에 리소스를 요청한다. 인증 서버는 해당 토큰을 검증하고 유효하다면 리소스를 반환한다.

    3. 토큰이 만료되면 서버는 사용자에게 다시 자격 증명을 요구하고 토큰을 재발급한다.