# Secure Sockets Layer

데이터를 암호화하여 안전하게 주고받기 위한 프로토콜

TLS가 현재는 더 많이 사용되나, 여전히 SSL을 관용적으로 사용함

SSL/TLS는 클라이언트-서버 간 통신 내용을 암호화하고 통신 상대방을 인증하여 데이터 무결성을 보장하는 역할을 한다.

인터넷 통신은 기본적으로 암호화되지 않은 Plain Text로 통신이 이루어진다.

이는 탈취 및 변조에 위험이 크기 때문에 반드시 암호화가 필요하다.

이를 방지하기 위해 등장한 것이 바로 SSL이다.

## 동작 원리(핸드셰이크 과정)

1. Client Hello : 클라이언트가 암호화 방식(암호 스위트)을 서버에 보냄

2. Server Hello : 서버가 선택한 암호화 방식과 서버 인증서(공개키 포함)를 클라이언트에 보냄

3. 서버 인증서 확인 : 클라이언트가 서버 인증서 유효성 검사를 실시

4. 세션 키 교환 : 클라이언트가 서버 공개키를 세션키(대칭키)로 암호화해 서버에 전송

5. 암호화된 통신 시작 : 서버가 개인키로 대칭키를 복호화하고, 대칭키로 암호화된 대칭 암호 통신 시작

## 대칭키, 공개키

- 대칭키 : 같은 키를 사용해 암호화/복호화를 수행한다. 속도가 빠르고 데이터 암호화에 사용된다. 그러나 유출되면 완전 무력화되므로 키 교환이 어렵다.

- 공개키 : 공개키로 암호화를 진행하고 개인키로 복호화를 한다.
속도가 느리고 대칭키 교환과 인증에 사용된다.
수학적 방식을 사용하여 누구나 암호화 가능하나 복호화는 개인키를 사용하여야 한다.

실제로는 두 개를 혼합해서 사용하는데, 대칭키를 공개키로 암호화하고 암호화된 대칭키를 사용하여 실제 데이터를 교환하는 방식을 사용한다.

공개키는 키 교환용, 대칭키는 실제 데이터 암호화용으로 사용한다.

HTTPS는 HTTP에 SSL/TLS를 적용한 것이다.

현재는 SSL의 취약점이 발견되어 사용하지 않고 TLS를 사용한다.

# TLS

SSL의 후속 버전

다양한 프로토콜의 통신 암호화에 사용된다.

일반적으로 HTTP는 도청, 변조, 중간자 공격(통신 중간에 끼어들어 조작)에 취약하다.

SSL과 마찬가지로 암호화, 인증, 무결성 검사를 제공한다.

## 동작 과정(핸드셰이크 단계)

1. Client Hello : 서버에 클라이언트가 알고리즘 목록, 랜덤값, TLS 버전, 기타 정보 등을 전송한다.

2. Server Hello : 암호화 알고리즘, 서버 인증서, 서버 랜덤값을 응답으로 클라이언트에 보낸다.

3. 인증서 검증 : 클라이언트가 인증서를 검사

4. 세션키 교환 : 클라이언트가 대칭키를 생성하고, 서버가 제공하는 공개키를 사용하여 암호화하여 서버에 전송한다. 서버는 자신의 개인키로 복호화하여 대칭키를 얻어낸다.

5. Finished : 서로 Finished 메시지를 주고받으며 핸드셰이크 완료. TLS 세션이 설정되고 실질적인 데이터는 대칭키 암호화로 주고받는다.

이것을 대표적으로 사용하는게 HTTPS이다.