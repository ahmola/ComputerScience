웹 서버는 HTTP 요청을 처리하고 응답을 제공한다. 다양한 기능을 제공하나 공통 핵심은 리소스에 대한 HTTP 요청을 받아서 리소스를 클라이언트에게 돌려준다는 점이다. 웹 서버는 자신이 제공하는 리소스를 관리하고 설정, 통제, 확장을 위한 관리 기능을 제공한다. HTTP와 TCP 처리를 구현해야 한다. TCP커넥션 관리를 운영체제와 나눠 갖는다. 

웹 서버가 하는 일

    1. 커넥션을 맺는다. 클라이언트 접속을 가려 받는다. 악의적이거나 인가되지 않은 클라이언트의 접근은 거부한다.
    
    2. 요청을 받는다. HTTP 요청 메시지를 네트워크 인터페이스가 받아서 TCP/IP 네트워크 스택에서 각 계층의 헤더를 분리하여 IP주소를 추출한다. 서버 소프트웨어가 요청을 받는다. 요청을 받으면 파싱한다. 요청 메서드와 URI 등을 찾고 헤더를 읽는다. body가 있다면 읽어들인다.

    3. 요청을 처리한다. 요청 메시지를 해석하고 처리한다. 메서드, 리소스, 헤더, body를 얻어내어 처리한다.

    4. 리소스에 접근한다. 메시지가 요구하는 리소스가 저장된 공간(ex. DB)에 접근하여 리소스를 불러온다.

    5. 응답을 만든다. 리소스 저장공간에서 받아온 리소스를 헤더와 함께 HTTP 응답 메시지를 생성한다. MIME 타입을 서술하는 content-type, body 길이를 나타내는 content-length 헤더와 body 등을 응답 메시지에 포함한다.

    6. 응답을 보낸다. 응답을 다시 TCP/IP스택과 네트워크 인터페이스를 거쳐서 헤더를 추가하여 클라이언트에게 보낸다.

    7. 트랜잭션을 로그에 남긴다. 로그파일에 트랜잭션에 대한 기록을 남긴다.

