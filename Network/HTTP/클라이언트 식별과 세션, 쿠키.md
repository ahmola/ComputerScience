HTTP는 익명이며, 매 요청이 일회성이고 독립적이며(stateless), 요청/응답으로 작동하는 프로토콜이다.

그러나 현대 웹 사이트들은 개인화된 서비스를 제공하는 것을 초점으로 한다. 이를 위해서는 사용자의 정보를 남겨야하고 이 상태를 유지하려면 각 사용자의 HTTP 트랜잭션을 식별할 수 있어야한다.

세션은 이러한 HTTP의 한계를 극복하기 위해 연결 기간동안 상태를 유지하기 위한 데이터 저장소 역할을 한다. 서버는 클라이언트로부터 요청을 받으면 세션 ID를 생성하여 클라이언트를 식별한다.

생성한 세션 ID는 요청과 함께 쿠키에 담겨져서(또는 URL 파라미터에) 보내지게 된다. 

서버는 세션에서 세선ID와 관련 데이터를 저장한다.

클라이언트는 이후에 세션 ID를 포함하여 서버에 보낸다.

세션은 서버에서 세션 저장소를 두어 따로 관리하고, 클라이언트에서 JSON Web Token의 형태로 저장한다.

    1. HTTP 헤더에 From(이메일 주소), User-Agent(브라우저 이름과 버전), Authorization(비밀번호) 등을 포함하여 전송한다.

    2. 사용자 로그인 : 웹 서버에 사용자 이름과 비밀번호로 인증, 즉 로그인할 것을 요구하여 명시적인 식별을 가능하게 한다.
    WWW-Authenticate와 Authorization 헤더를 사용하여 모든 요청에 로그인 정보를 함께 보낸다. 그러나 매번 사이트를 옮겨다닐 때마다 로그인 해야하고 다른 사이트마다 겹치지 않는 이름과 비밀번호를 사용해야되서 사용자에게 불편함을 준다.

    이를 해결하기 위해 쿠키를 사용한다.

    쿠키 : 사용자를 식별하고 세션을 유지하는 방식. 충돌 가능성이 있어서 캐시나 브라우저는 쿠키를 캐싱하지 않는다. 쿠키는 크게 세션 쿠키와 지속 쿠키가 있다.

        세션 쿠키 : 사용자가 사이트 탐색 시 관련 설정과 선호 사항들을 저장하는 임시 쿠키이다. 사용자가 브라우저를 닫으면 삭제된다.

        지속 쿠키 : 삭제되지 않는다. 디스크에 저장되어 컴퓨터를 종료해도 남아있다. 주기적인 방문을 하는 사이트의 설정 정보나 로그인 이름을 유지하기 위해 남긴다.

        두 쿠키의 차이점은 파기 시점이다. 파기와 관련된 파라미터인 Expires 또는 Max-Age가 없다면 세션 쿠기가 된다.

    쿠키는 이름=값 형태의 리스트를 가지고 헤더에(Set-Cookie, Set-Cookie2) 기술되어 사용자에게 전달된다. 어떤 정보든 포함될 수 있다. 헤더의 쿠키 컨텐츠는 쿠키 데이터베이스에 저장한다.

    기본적으로 쿠키는 브라우저가 서버 관련 정보를 저장하고 사용자가 접근할 때마다 정보를 함께 전송한다. 브라우저는 'HTTP State Management Mechanism'이라는 시스템을 통해 쿠키를 저장한다.

    쿠키 Domain 속성 : 어떤 사이트가 해당 쿠키를 읽을 지 제어. 예를 들어 .abc.com 도메인을 가지고 있다면 해당 도메인으로 끝나는 사이트에 브라우저가 쿠키를 전달한다.

    쿠키 Path 속성 : 일부 사이트에만 쿠키를 적용할 수 있다. Path 속성을 기술하여 해당 경로에 속하는 페이지만 쿠키를 전달한다. 예를 들어 도메인 .abc.com에 /auth 경로를 속성으로 적용하면 www.abc.com/auth/~에 사용자가 접근할 때만 브라우저가 해당 쿠키를 제공한다.

    쿠키는 Version 0와 Version 1(RFC 2965)가 있는데, Version 0가 자주 쓰인다.

    쿠키는 다수의 트랜잭션을 만드는 사용자를 추적하는 데 사용된다.
    
    ![img](https://bebiangel.github.io/images/http-guide-chap11.png)