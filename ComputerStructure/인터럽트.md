인터럽트 : 프로그램 실행 중 이상 상황 발생 시 현재 작업 즉시 중단하고 상황 처리 후 다시 작업에 복귀하는 것
인터럽트를 사용하면 비상 상황에 대비하여 프로그램 상태를 보존할 수 있고, CPU와 입출력 장치 간의 속도 차에 의한 작업의 효율화가 가능하다.

인터럽트의 종류
    
    외부 인터럽트 : 전원(정전), 타이밍 장치(타이머), 입출력 장치(오류) 등 외부 요인으로 발생
    내부 인터럽트 : 잘못된 명령어나 데이터 사용 시 발생. 예외 또는 트랩이라고 함. 0으로 나누거나 오버플로, 캐시 미스, 페이지 폴트 등
    소프트웨어 인터럽트 : 특수 call명령어를 사용하여 발생. SuperVisor Call

    인터럽트 우선순위 : (전원 이상 > 기계 오작동 > 외부 신호 > 입출력)외부 > (프로그램 검사) 내부 > (SVC) 소프트웨어

인터럽트 구성 요소 : 요청 신호, 처리 루틴, 서비스 루틴

인터럽트 처리 순서
    
    1. 요청 신호 발생
    2. 수행 중인 명령어 수행 후 프로그램 일시 정지
    3. 프로그램 레지스터 내용과 명령어 주소(프로그램 카운터)를 안전한 장소에 저장
    4. 인터럽트의 종류를 판별, 서비스 루틴(인터럽트 핸들러) 실행
    5. 레지스터 내용과 명령어 주소를 복구하여 중단 시점부터 재시작

CPU는 인터럽트 요청 인식을 위해서 제어 버스에 인터럽트 요청 신호(입력)와 인터럽트 확인 신호(출력) 제어선을 포함함

인터럽트 사이클

    1. 프로그램으로 복귀할 때 필요한 정보 저장
    2. 인터럽트 요청 장치 식별
    3. 인터럽트 서비스 실행

RETI : 인터럽트 복귀 명령어, 서비스 루틴 마지막 명령어는 항상 RETI 명령어
인터럽트 반응 시간 : 요청 발생 시 부터 서비스 루틴 시작 시까지 걸리는 시간, 빠를수록 좋음
콘텍스트 : 실행하던 프로그램으로 복귀 시 필요한 최소한의 정보, PC와 레지스터 등이 대표적인 인터럽트 콘텍스트이고, CPU는 스택이나 인터럽트 벡터에 콘텍스트 저장

다중 인터럽트

    1. 프로그램 실행 상태 저장 후 장치 A의 서비스 루틴 수행
    2. 장치A의 인터럽트 수행 중에 우선순위가 더 높은 장치B의 인터럽트 요청이 들어옴
    3. 장치A의 인터럽트 수행 상태 저장 후 장치B의 서비스 루틴 수행
    4. 장치B 인터럽트 루틴 수행 완료 후 다시 장치A의 인터럽트 루틴으로 복귀

CPU가 콘텍스트인 PC와 레지스터를 저장하는 방법

    1. 인터럽트 서비스 루틴 저장 : PC 값을 인터럽트 서비스 루틴의 시작 주소에 저장한다. 인터럽트 명령어 수행 중 더 순위가 높은 인터럽트 요청이 들어오면 해당 프로그램 카운터 값을 들어온 인터럽트 서비스 루틴의 시작 주소에 저장
    2. 주기억 장치 스택에 저장 : 인터럽트 중첩 발생 시, 주 프로그램과 후순위 인터럽트를 스택에 저장(push). 선순위 인터럽트의 실행이 끝나면 스택에서 pop 명령어를 통해 꺼내옴.
    3. 별도의 레지스터에 저장 : 인터럽트 서비스 루틴 수행마다 새로운 레지스터 세트 할당. 신속한 처리 가능. 인터럽트 중첩이 레지스터를 1 증가시키고 끝나면 1 감소
    4. 인터럽트 벡터에 저장 : 인터럽트 벡터 테이블을 사용하여 pc값과 PSWR(주 프로그램), 분기 명령어를 저장하며 인터럽트 서비스 실행

인터럽트 요청선 연결 방법

    - 단일 회선 : 모든 장치를 인터럽트 요청선 하나에 직렬 연결. 인터럽트 요청 판별 기능. 소프트웨어로 판별하면 폴링, 하드웨어로 판별하면 데이지 체인이라고 한다.
    - 다중 회선 : CPU에 병렬로 연결되어 있다. 하드웨어로 판별
    - 혼합 회선 : 단일과 다중 회선을 혼합함

